<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link
    
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script src="https://unpkg.com/vue@2.7.8/dist/vue.js"></script>
    <script src="lesson.js"></script>
  </head>
  
  <body>
    <div id="app">
        <div class="checkout">
        <header>
            <button class="fa fa-shopping-basket" class="text-center" class="btn btn-outline-dark mt-auto" v-if="enableCheckout" @click="showCheckout">{{totalItems}} Checkout!</button>
            <button class="fa fa-shopping-basket" class="text-center" class="btn btn-outline-dark mt-auto" disabled v-else>Checkout</button>
        </div>
            <!--                           Buttons Below are the Sort Buttons                            -->
            <button class="text-center" class="btn btn-outline-dark mt-auto" v-on:click="lesson in sortedProductsAscending">Ascending</button>
            <button class="text-center" class="btn btn-outline-dark mt-auto" v-on:click="lesson in sortedProductsDescending">Descending</button>

            <!-- <div v-onclick="lesson in sortedProducts"></div> -->
          </header>
          <div v-if="showlesson">
            <p>
                <label>Search Lesson: </label>
                <input type="text" v-model="search" placeholder="Type something">
            </p>
            
            <section class="py-5">
            <div class="container px-1000 px-lg-1000 mt-1000">
                <div class="row gx-400 gx-lg-500 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
                 <div  v-for="lesson in lessonSearch" class="result"  >
                    <img class="result" >
                        <div class="card h-100">
                            <div class="card-body p-4" >
                                <img img v-bind:src="lesson.img">
                                <div class="text-center">
                                    <div class="container2">
                                        <!-- <div v-for ="(lesson, key) in sortedLessons" class="item"> -->
                                      
                                    <!-- <div v-if="showProduct"></div> -->
                                   <!-- <div v-for="lesson.id" class="lesson"> -->
                                    <div>Subject: {{lesson.subject}}</div>
                                    <div>Location: {{lesson.location}}</div>
                                    <div>Spaces: {{lesson.space}}</div>
                                    <div>Price: {{lesson.price}}</div>
                                    <div> {{lesson.id}}</div>
                                    
                                   
                                  
                                </div>
                                </div>
                            </div>
                            <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                                <button class="text-center" class="btn btn-outline-dark mt-auto" v-on:click="addToCart(lesson)" v-if="canAddToCart(lesson)">add to cart</button>
                                <button class="text-center" class="btn btn-outline-dark mt-auto" v-else disabled>add to cart</button>
                                <span v-if="lesson.space === cartCount(lesson.id)"> all out</span>
                                <span v-else-if="lesson.space - cartCount(lesson.id) < 5"> only {{lesson.space - cartCount(lesson.id)}} left</span>
                                <span v-else>Availble to purchase {{(lesson.space)}}</span>
                                <!-- <div class="text-center"><a class="btn btn-outline-dark mt-auto" v-else-if="lesson.space - getCartItem(lesson.id) < 5"> Only {lesson.space - getCartItem(lesson.id)}} left!</a></div>
                                <div class="text-center"><a class="btn btn-outline-dark mt-auto" v-else> Buy now</a></div> --> 
                               <!-- <div class="text-center" v-if="canAddToCart"><a class="btn btn-outline-dark mt-auto" v-on:click="addToCart" >Add to Cart</a></div>-->
                                <!-- <div class="text-center"><a class="btn btn-outline-dark mt-auto" v-else disabled >Soldout</a></div> -->
                                <!-- </div> -->
                            </div>
                        </div>
                    </div>
                </div>
        
            </div>
        </section>
        </div>
    
        <div v-else>

             <!--Checkout Page-->
             <h2>Shopping Cart</h2>
             <table>
                 <thead>
                     <tr>
                         <th>Lesson</th>
                         <th>Location</th>
                         <th>Space</th>
                         <th>Price</th>
                     </tr>
                 </thead>
                 <tbody>
                     <tr v-for="item in cart"> 
                         <td>{{item.lesson.subject}}</td>
                         <td>{{item.lesson.location}}</td>
                          <td>{{item.quantity}}</td>
                         <td>{{item.lesson.price}}</td>
                         <td>
                              <button v-on:click="removeItem(item)">Remove</button> 
                         </td>
 
 
                     </tr>
                 </tbody>
             </table>
             <h2> Welcome to Checkout</h2>
             <p>
                Name:
                <input v-model="order.name">
             </p>
             <p>
                phone:
                <input v-model.number="order.phone">
             </p>
             <div class="submit">
                    <p>Name: {{order.name}}</p>
                    <p>Phone: {{order.phone}}</p> 
             </div>
             <button v-if="enableSubmit" v-on:click="submitForm"> submit</button>
             <button v-else disabled>Submit</button>


        </div>
    </div>




    <script src="app.js"></script>
</body>
</html>